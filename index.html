<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Residence Map</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        #map-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            overflow: hidden;
        }
        .image-mapper-shape {
            fill: rgba(0, 0, 0, 0);
        }
        g:hover .image-mapper-shape {
            stroke: white;
            stroke-width: 2px;
            opacity: 20%;
        }
        .house-info {
            display: none; /* Change back to 'none' */
            position: absolute;
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            pointer-events: none;
            max-width: 80%; /* Limit width on small screens */
            font-size: 14px; /* Slightly smaller font size */
            overflow-y: auto; /* Allow scrolling if content is too long */
            max-height: 50vh; /* Limit height to half of the viewport height */
        }
        @media (max-width: 768px) {
            .house-info {
                font-size: 12px; /* Even smaller font on very small screens */
            }
        }
    </style>
</head>
<body>
    <div id="map-container">
        <svg style="width:100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 4000 4000">
            <image xlink:href="residence-map.jpg" width="4000" height="4000"></image>
            <a xlink:href="#" data-house-id="1">
                <g>
                    <rect x="2001.8993352326686" y="3133.903133903134" width="68.37606837606813" height="117.75878442545127" class="image-mapper-shape"></rect>
                </g>
            </a>
<a xlink:href="#" data-house-id="2">
                <g>
                    <rect x="2108.262108262108" y="2856.6001899335233" width="53.18138651472009" height="106.36277302943972" class="image-mapper-shape"></rect>
                </g>
            </a>

            <!-- Add more <a> elements for other houses as needed -->
        </svg>
    </div>

    <script>
        const houseInfo = {
            1: { owner: "Michael Christian", address: "Topaz Timur 2 no 12", phone: "123-456-7890" },
            2: { owner: "Phina Rumengan", address: "Topaz Timur 2 no 5", phone: "098-765-4321" },
            // Add more house information as needed
        };

        const mapContainer = document.getElementById('map-container');
        const areas = document.querySelectorAll('#map-container a');

        areas.forEach(area => {
            area.addEventListener('mouseover', showHouseInfo);
            area.addEventListener('mouseout', hideHouseInfo);
            // Add this line for debugging
            area.addEventListener('click', (e) => console.log('Clicked:', e.currentTarget.getAttribute('data-house-id')));
        });

        function showHouseInfo(event) {
            const houseId = event.currentTarget.getAttribute('data-house-id');
            const info = houseInfo[houseId];
            
            console.log('Hovering over house:', houseId);

            if (info) {
                const infoElement = document.createElement('div');
                infoElement.className = 'house-info';
                infoElement.innerHTML = `
                    <h3>House ${houseId}</h3>
                    <p>Owner: ${info.owner}</p>
                    <p>Address: ${info.address}</p>
                    <p>Phone: ${info.phone}</p>
                `;
                
                mapContainer.appendChild(infoElement);

                // Position the info element
                const rect = mapContainer.getBoundingClientRect();
                const infoRect = infoElement.getBoundingClientRect();
                let left = event.clientX - rect.left + 10;
                let top = event.clientY - rect.top + 10;

                // Adjust position if it goes off-screen
                if (left + infoRect.width > rect.width) {
                    left = rect.width - infoRect.width - 10;
                }
                if (top + infoRect.height > rect.height) {
                    top = rect.height - infoRect.height - 10;
                }

                // Ensure the info element is not positioned off the left or top edge
                left = Math.max(10, left);
                top = Math.max(10, top);

                infoElement.style.left = `${left}px`;
                infoElement.style.top = `${top}px`;
                infoElement.style.display = 'block';

                console.log('Info element added:', infoElement);
            }
        }

        function hideHouseInfo() {
            const infoElement = document.querySelector('.house-info');
            if (infoElement) {
                infoElement.remove();
                // Add this line for debugging
                console.log('Info element removed');
            }
        }
    </script>
</body>
</html>